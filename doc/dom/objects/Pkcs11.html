<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><!-- saved from url=(0014)about:internet --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" href="../../style.css" type="text/css" media="screen"><link rel="stylesheet" href="../../print.css" type="text/css" media="print"><link rel="stylesheet" href="../../override.css" type="text/css"><meta name="keywords" content="Pkcs11,dom.objects.Pkcs11,addModule,addRange,addReadRequest,alert,assign,back,clearRequest,close,collapse,collapseToEnd,collapseToStart,containsNode,deleteFromDocument,deletemodule,disableRightClick,doReadRequest,extend,forward,generateCRMFRequest,getAttribute,getRangeAt,getStorageUpdates,getStorageUpdates,go,importUserCertificates,item,item,item,javaEnabled,logout,mozIsLocallyAvailable,nameItem,nameItem,nameItem,popChallengeResponse,postMessage,preference,random,refresh,registerContentHandler,registerContentHandler,registerProtocolHandler,registerProtocolHandler,reload,removeAllRanges,removeRange,replace,selectAllChildren,selectionLanguageChange,setAttribute,signText,start,tags,taintEnabled,toString"><title>dom.objects.Pkcs11</title></head><body><script language="javascript" type="text/javascript" src="../../asdoc.js"></script><script language="javascript" type="text/javascript" src="../../help.js"></script><script language="javascript" type="text/javascript" src="../../cookies.js"></script><script language="javascript" type="text/javascript"><!--
				asdocTitle = 'Pkcs11 - DOM Reference Manual';
				var baseRef = '../../';
				window.onload = configPage;
			--></script>
<script language="javascript" type="text/javascript"><!--
function submitValue(){
var searchStr=document.getElementById('search-livedocs').value;
window.location="../../search.html"+"###"+searchStr;
}
--></script><script type="text/javascript">
			scrollToNameAnchor();
		</script><table class="titleTable" cellpadding="0" cellspacing="0" id="titleTable" style="display:none"><tr><td class="titleTableTitle" align="left">DOM Reference Manual</td><td class="titleTableSearch" align="center"><form class="searchForm" method="get" action="../../search.html" onsubmit="submitValue();"><input class="hidden" name="loc" value="" type="hidden"><input class="hidden" name="termPrefix" value="" type="hidden"><input class="hidden" name="term" value="" type="hidden"><input class="hidden" name="area" value="" type="hidden"><input id="search-livedocs" name="search_text" value="" title="" type="text"> <input type="button" name="action" value="Search" onclick="submitValue()"></form></td><td class="titleTableTopNav" align="right"><a href="../../package-summary.html" onclick="loadClassListFrame('../../all-classes.html')">All Packages</a>&nbsp;|&nbsp;<a href="../../class-summary.html" onclick="loadClassListFrame('../../all-classes.html')">All Classes</a>&nbsp;|&nbsp;<a href="../../all-index-A.html" onclick="loadClassListFrame('../../index-list.html')">Index</a>&nbsp;|&nbsp;<a id="framesLink1" href="../../index.html?dom/objects/Pkcs11.html&amp;dom/objects/class-list.html">Frames</a><a id="noFramesLink1" style="display:none" href="" onclick="parent.location=document.location"> No Frames </a></td><td class="titleTableLogo" align="right" rowspan="3"><img src="../../images/logo.jpg" class="logoImage" alt=" Adobe Logo " title=" Adobe Logo "></td></tr><tr class="titleTableRow2"><td class="titleTableSubTitle" id="subTitle" align="left">Pkcs11</td><td class="titleTableSubNav" id="subNav" align="right" colspan="2"><a href="#methodSummary">Methods</a></td></tr><tr class="titleTableRow3"><td colspan="3">&nbsp;</td></tr></table><script language="javascript" type="text/javascript" xml:space="preserve">
				<!--
				
					if (!isEclipse() || window.name != ECLIPSE_FRAME_NAME) {titleBar_setSubTitle("Pkcs11"); titleBar_setSubNav(false,false,false,false,false,false,false,false,true,false,false	,false,false,false,false,false);}	
				-->
			</script><div xmlns:fn="http://www.w3.org/2005/xpath-functions" class="MainContent"><table class="classHeaderTable" cellpadding="0" cellspacing="0"><tr><td class="classHeaderTableLabel">Package</td><td><a href="package-detail.html" onclick="javascript:loadClassListFrame('class-list.html')">dom.objects</a></td></tr><tr><td class="classHeaderTableLabel">Class</td><td class="classSignature">public  class  Pkcs11</td></tr><tr><td class="classHeaderTableLabel">Inheritance</td><td class="inheritanceList">Pkcs11  <img src="../../images/inherit-arrow.gif" title="Inheritance" alt="Inheritance" class="inheritArrow"> Object</td></tr></table><p></p><table cellpadding="0" cellspacing="0" border="0"><tr><td class="sinceTableLabel"><b>Introduced in:&nbsp;</b></td><td><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;</td></tr></table><p></p><p></p><p></p>
	 PKCS11 modules are external modules which provide access to smart-card readers, biometric security 
	 devices, or external certificate stores. There are two methods for installing PKCS11 modules into 
	 Firefox. Users can use the preferences dialog to install or remove PKCS11 module. Extensions can 
	 programmatically manage PKCS11 modules using the nsIPKCS11 programming interface.
	 
	 <p>
                  <b>Note (Mozilla):</b> The information in this article is specific to Firefox 3.5 and 
	 newer, support for window.pkcs11 property was disabled due to security concerns.</p>
	 
	              <p>
                  <b>Mechanism Flag Definitions</b>
               </p>
	 
	              <p>In general, most tokens should not set any of the cipher flags. Setting these flags means you want 
	 your token to supply the default implementation for these functions. Normally Mozilla uses its own 
	 internal module to supply these functions. These flags override that preference. If you choose to 
	 implement these flags, your module must supply the following additional functions for each flag: </p>
	 
	              <ul>
		                <li>PKCS11_MECH_FLAG: must support CKM_RSA_PKCS and CKM_RSA_X_509 and the following functions: C_WRAPKEY, C_ENCRYPT, C_SIGN, C_DECRYPT, C_UNWRAPKEY, C_VERIFYRECOVER, C_VERIFY, C_GENERATEKEYPAIR (2048, 1024, 512) size
		</li>
		                <li>PKCS11_MECH_DSA_FLAG: must support CKM_DSA and the following functions: C_SIGN, C_VERIFY, C_GENERATEKEYPAIR
		</li>
		                <li>PKCS11_MECH_RC2_FLAG: must support CKM_RC2_CBC and CKM_RC2_ECB and the following functions: C_GENERATEKEY, C_ENCRYPT, C_DECRYPT, C_WRAPKEY, C_UNWRAPKEY
		</li>
		                <li>PKCS11_MECH_RC4_FLAG: must support CKM_RC4_CBC and CKM_RC4_ECB and the following functions: C_GENERATEKEY, C_ENCRYPT, C_DECRYPT, C_WRAPKEY, C_UNWRAPKEY
		</li>
		                <li>PKCS11_MECH_DES_FLAG: must support CKM_CPMF_CBC, CKM_DES_CBC, CKM_DES3_CBC, CKM_CPMF_ECB, CKM_DES_ECB, CKM_DES3_ECB and the following functions: C_GENERATEKEY, C_ENCRYPT, C_DECRYPT, C_WRAPKEY, C_UNWRAPKEY
		</li>
		                <li>PKCS11_MECH_DH_FLAG: must support CKM_DH_PKCS_DERIVE and CKM_DH_KEY_PAIR_GEN and the following functions: C_DERIVEKEY, C_GENERATEKEYPAIR
		</li>
		                <li>PKCS11_MECH_MD5_FLAG: Hashing must be able to function without authentication.
		</li>
		                <li>PKCS11_MECH_SHA1_FLAG: Hashing must be able to function without authentication.
		</li>
		                <li>PKCS11_MECH_MD2_FLAG: Hashing must be able to function without authentication.
		</li>
		                <li>PKCS11_RANDOM_FLAG: Use token's Random Number Generator.
			<ul>
				                    <li>Warning: Must be able to use without authentication. Many hardware random number generators are not as secure as the Netscape internal one. Do not select this value unless you can show that your random number generator is secure. Even so, it's highly discouraged.
				</li>
			                  </ul>
		                </li>
		                <li>PKCS11_PUB_READABLE_CERT_FLAG: This is the only flag most smart tokens should turn on. You can turn this flag on if:
			<ul>
				                    <li> the certs on your token can be read without authentication and,
				</li>
				                    <li> the public key on your token can be found by ID, MODULUS, or VALUE and all your private keys have the associated public key.

					<ul>
						                        <li>Turning this flag on will illuminate a large number of password prompts for your token when looking up certs in Communicator. </li>
					                      </ul>
				                    </li>
			                  </ul>
		                </li>
		             </ul>
	 
	           <p></p><p><span class="classHeaderTableLabel">See also</span></p><div class="seeAlso"><a href="http://developer.mozilla.org/en/PKCS11" target="mm_external" rel="external nofollow">MDC - PKCS11</a><br/><a href="http://developer.mozilla.org/en/DOM/window.pkcs11" target="mm_external" rel="external nofollow">MDC - window.pkcs11</a><br/><a href="http://developer.mozilla.org/en/JavaScript_crypto" target="mm_external" rel="external nofollow">MDC - JavaScript crypto</a></div><br/><hr></div><a name="methodSummary"></a><div class="summarySection"><div class="summaryTableTitle">Public Methods </div><table cellspacing="0" cellpadding="3" class="summaryTable " id="summaryTableMethod"><tr><th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined By</th></tr><tr class="" bgColor=""><td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><div class="summarySignature"><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;<a href="#addModule()" class="signatureLink">addModule</a>(moduleName:<a href="../../dom/core/types/DOMString.html">DOMString</a>, libraryFullPath:<a href="../../dom/core/types/DOMString.html">DOMString</a>, cryptoMechanismFlags:Number, cipherFlags:Number):Number</div><div class="summaryTableDescription">
		 Loads a new PKCS #11 module.</div></td><td class="summaryTableOwnerCol">Pkcs11</td></tr><tr class="" bgColor=""><td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><div class="summarySignature"><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;<a href="#deletemodule()" class="signatureLink">deletemodule</a>(moduleName:<a href="../../dom/core/types/DOMString.html">DOMString</a>):Number</div><div class="summaryTableDescription">
		 Removes a PKCS #11 module.</div></td><td class="summaryTableOwnerCol">Pkcs11</td></tr></table></div><script language="javascript" type="text/javascript"><!--
										showHideInherited();
										--></script><div class="MainContent"><a name="methodDetail"></a><div class="detailSectionHeader">Method Detail</div><a name="addModule()"></a><a name="addModule(dom.core.types.DOMString,dom.core.types.DOMString,Number,Number)"></a><table class="detailHeader" cellpadding="0" cellspacing="0"><tr><td class="detailHeaderName"><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;addModule</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td></tr></table><div class="detailBody"><code> public function addModule(moduleName:<a href="../../dom/core/types/DOMString.html">DOMString</a>, libraryFullPath:<a href="../../dom/core/types/DOMString.html">DOMString</a>, cryptoMechanismFlags:Number, cipherFlags:Number):Number</code><p></p><table cellpadding="0" cellspacing="0" border="0"><tr><td class="sinceTableLabel"><b>Introduced in:&nbsp;</b></td><td><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;</td></tr></table><p></p><p></p><p>
		 Loads a new PKCS #11 module.
		 
		 <p><b>Note (Mozilla):</b> The module will be placed in the NSS secmod.db database and will be loaded
		 automatically on application restart.</p>
		 
		 </p><p><span class="label"> Parameters </span><table cellpadding="0" cellspacing="0" border="0"><tr><td width="20px"></td><td><code><span class="label">moduleName</span>:<a href="../../dom/core/types/DOMString.html">DOMString</a></code> &mdash; Name of the module.
		 </td></tr><tr><td class="paramSpacer">&nbsp;</td></tr><tr><td width="20px"></td><td><code><span class="label">libraryFullPath</span>:<a href="../../dom/core/types/DOMString.html">DOMString</a></code> &mdash; The filename of the library prepended with its full path.
		 </td></tr><tr><td class="paramSpacer">&nbsp;</td></tr><tr><td width="20px"></td><td><code><span class="label">cryptoMechanismFlags</span>:Number</code> &mdash; A bit vector indicating all cryptographic mechanisms should be turned on by default (see above).
		 </td></tr><tr><td class="paramSpacer">&nbsp;</td></tr><tr><td width="20px"></td><td><code><span class="label">cipherFlags</span>:Number</code> &mdash; A bit vector indicating all SSL or S/MIME cipher functions supported by the module (see above).
		 </td></tr></table></p><p></p><span class="label">Returns</span><table cellpadding="0" cellspacing="0" border="0"><tr><td width="20"></td><td><code>Number</code> &mdash; Unknown
		 
		 </td></tr></table><p><span class="label">See also</span></p><div class="seeAlso"><a href="http://developer.mozilla.org/en/JavaScript_crypto" target="mm_external" rel="external nofollow">MDC - JavaScript crypto</a></div></div><a name="deletemodule()"></a><a name="deletemodule(dom.core.types.DOMString)"></a><table class="detailHeader" cellpadding="0" cellspacing="0"><tr><td class="detailHeaderName"><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;deletemodule</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td></tr></table><div class="detailBody"><code> public function deletemodule(moduleName:<a href="../../dom/core/types/DOMString.html">DOMString</a>):Number</code><p></p><table cellpadding="0" cellspacing="0" border="0"><tr><td class="sinceTableLabel"><b>Introduced in:&nbsp;</b></td><td><span class="domIcon"><abbr title="Document Object Model">DOM</abbr> 0</span>&nbsp;</td></tr></table><p></p><p></p><p>
		 Removes a PKCS #11 module.
		 
		 <p><b>Note (Mozilla):</b> In the delete case, the module is removed from the NSS secmod.db. This function 
		 will issue a user prompt to confirm the operation before the add or delete actually occurs.</p>
		 
		 </p><p><span class="label"> Parameters </span><table cellpadding="0" cellspacing="0" border="0"><tr><td width="20px"></td><td><code><span class="label">moduleName</span>:<a href="../../dom/core/types/DOMString.html">DOMString</a></code> &mdash; Name of the module.
		 </td></tr></table></p><p></p><span class="label">Returns</span><table cellpadding="0" cellspacing="0" border="0"><tr><td width="20"></td><td><code>Number</code> &mdash; Unknown
		 
		 </td></tr></table><p><span class="label">See also</span></p><div class="seeAlso"><a href="http://developer.mozilla.org/en/JavaScript_crypto" target="mm_external" rel="external nofollow">MDC - JavaScript crypto</a></div></div><br/><br/><hr><br/><p></p><center class="copyright"><footer>&copy; 2009 Gabriel Mariani (<a href='http://blog.coursevector.com/'>http://blog.coursevector.com/</a>). All rights reserved.</footer><br/>Mon Aug 17 2009, 10:08 AM -04:00  </center></div></body></html><!--&copy; 2009 Gabriel Mariani (<a href='http://blog.coursevector.com/'>http://blog.coursevector.com/</a>). All rights reserved.<br/>Mon Aug 17 2009, 10:08 AM -04:00  -->